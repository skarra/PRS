{% extends 'base.html' %}

{% block styles %}
<link href={{ auto_ver("/static/css/dataTables/demo_table.css") }} 
      rel="stylesheet" type="text/css"/>
<link href={{ auto_ver("/static/css/srp.css") }} rel="stylesheet" 
      type="text/css" />
<link rel="stylesheet" 
      href="/static/css/pepper-grinder/jquery-ui-1.8.21.custom.css">
{% end block %}

{% block scripts %}
  <script src={{ auto_ver("/static/js/visit_stats.js") }}> </script>
{% end block %}

{% block content %}
<h1>Visit Statistics</h1>
<p/>

<form id="vs_form" method="GET">
<!-- Filtering by Department and Doctor is not enabled for now. We may come back to his at a later time.
 <label>Dept.:</label>
  <select id="vs_dept_list" name="vs_dept_list">
    <option value="All"> All </option>
    {% for d in depts %}
      <option value={{ d[0] }}> {{ d[1] }} </option>
    {% end %}
  </select>

  <label>Doctor:</label>
  <select id="vs_doc_list" name="vs_doc_list">
    <option value="All"> All </option>
    {% for d in docs %}
      <option value={{ d[0] }}> {{ d[1] }} </option>
    {% end %}
  </select>

  <p/>
-->
<div class="nav hide-in-print">
  <div id="info">
    <div id="print_doc_lab" class="navElem printElem">Print</div>
  </div>
</div>

  <label>From:</label>
  <input type="text" class="date date-field " id="vs_from" name="vs_from"
	 value={{ summary['from'] if summary else " " }} 
	 />

  <label>To:</label>
  <input type="text" class="date date-field " id="vs_to" name="vs_to"
	 value={{ summary['to'] if summary else " " }} 
	 />

  <input type="submit" value="Go" id="vs_submit"/>
</form>

<hr/>

{% if summary %}
  <div style="width: 27%;"> Total Patients Visited : 
    <div id="vs_total_visits" class="relative"> </div> 
  </div>
  <div style="width: 27%;">
    Total Fee Collected :  
    <div id="vs_total_fee" class="relative"> </div>
  </div>
  <hr/>

  <div class="col_parent">
    <div class="half">
      <div class="vs_table_header">
	<strong> Statistics by Doctor: </strong>
      </div>

      <p/>
      <table id="vs_doc_table" class="display" name="vs_doc_table">
        <thead>
            <th>ID </th>
            <th>Doctor</th>
            <th>Visits </th>
            <th>Charge </th>
        </thead>

        <tfoot>
            <th style="text-align:right" colspan="2"> Total: </th>
            <th style="text-align:right"> </th>
            <th style="text-align:right"> </th>
        </tfoot>

        <tbody>
            {% for key, docv in summary['doc'].iteritems() %}
	    <tr>
	      <td> {{ key }}            </td>
	      <td> {{ docv['name']   }} </td>
	      <td> {{ docv['patcnt'] }} </td>
	      <td> {{ docv['fee']    }} </td>
	    </tr>
            {% end %}
        </tbody>
      </table>
    </div>

    <div class="half">
      <div class="vs_table_header">
	<strong> Statistics by Department: </strong>
      </div>
      <p/>
      <table id="vs_dept_table" class="display">
        <thead>
            <th>ID </th>
            <th>Department </th>
            <th>Visits </th>
            <th>Charge </th>
        </thead>

        <tfoot>
            <th style="text-align:right" colspan="2"> Total: </th>
            <th style="text-align:right"> </th>
            <th style="text-align:right"> </th>
        </tfoot>

        <tbody>
            {% for key, depv in summary['dept'].iteritems() %}
	    <tr>
	      <td> {{ key }}            </td>
	      <td> {{ depv['name']   }} </td>
	      <td> {{ depv['patcnt'] }} </td>
	      <td> {{ depv['fee']    }} </td>
	    </tr>
            {% end %}
        </tbody>
      </table>
    </div>
  </div>


{% end %}

{% end block %}
